<html>
  <head>
    <title>Panel de Administración - Cine Castellano HD</title>
  </head>
  <body>
    <h1>Panel de Administración</h1>
    <h2>Añadir películas en bloque</h2>

    <form id="bulkImportForm">
      <textarea id="moviesText" rows="20" cols="50" placeholder="Pega las películas aquí, una por línea. Ejemplo: [Título (Año)](Enlace)..."></textarea><br><br>
      <button type="submit">Importar Películas</button>
    </form>

    <div id="result"></div>

    <script>
      document.getElementById('bulkImportForm').addEventListener('submit', async function (event) {
        event.preventDefault();

        const text = document.getElementById('moviesText').value.trim();
        if (!text) {
          alert('Por favor, pega el texto con las películas');
          return;
        }

        // Send the text to the backend
        const response = await fetch('/api/admin/bulkImport', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer YOUR_ADMIN_TOKEN', // Replace with the actual token
          },
          body: JSON.stringify({ text })
        });

        const data = await response.json();
        let result = 'Películas importadas: ' + data.imported + '<br>';
        if (data.errors.length > 0) {
          result += 'Errores: <br>' + data.errors.join('<br>');
        }
        document.getElementById('result').innerHTML = result;
      });
    </script>
  </body>
</html>
